{"ast":null,"code":"import * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\n\nconst isOrthographic = def => def && def.isOrthographicCamera;\n\nconst isObject3D = def => def && def.isObject3D;\n\nconst isBox3 = def => def && def.isBox3;\n\nconst context = /*#__PURE__*/React.createContext(null);\n\nfunction Bounds(_ref) {\n  let {\n    children,\n    damping = 6,\n    fit,\n    clip,\n    margin = 1.2,\n    eps = 0.01,\n    onFit\n  } = _ref;\n  const ref = React.useRef(null);\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const controls = useThree(state => state.controls);\n  const invalidate = useThree(state => state.invalidate);\n  const onFitRef = React.useRef(onFit);\n  onFitRef.current = onFit;\n\n  function equals(a, b) {\n    return Math.abs(a.x - b.x) < eps && Math.abs(a.y - b.y) < eps && Math.abs(a.z - b.z) < eps;\n  }\n\n  function damp(v, t, lambda, delta) {\n    v.x = THREE.MathUtils.damp(v.x, t.x, lambda, delta);\n    v.y = THREE.MathUtils.damp(v.y, t.y, lambda, delta);\n    v.z = THREE.MathUtils.damp(v.z, t.z, lambda, delta);\n  }\n\n  const [current] = React.useState(() => ({\n    animating: false,\n    focus: new THREE.Vector3(),\n    camera: new THREE.Vector3(),\n    zoom: 1\n  }));\n  const [goal] = React.useState(() => ({\n    focus: new THREE.Vector3(),\n    camera: new THREE.Vector3(),\n    zoom: 1\n  }));\n  const [box] = React.useState(() => new THREE.Box3());\n  const api = React.useMemo(() => {\n    function getSize() {\n      const size = box.getSize(new THREE.Vector3());\n      const center = box.getCenter(new THREE.Vector3());\n      const maxSize = Math.max(size.x, size.y, size.z);\n      const fitHeightDistance = isOrthographic(camera) ? maxSize * 4 : maxSize / (2 * Math.atan(Math.PI * camera.fov / 360));\n      const fitWidthDistance = isOrthographic(camera) ? maxSize * 4 : fitHeightDistance / camera.aspect;\n      const distance = margin * Math.max(fitHeightDistance, fitWidthDistance);\n      return {\n        box,\n        size,\n        center,\n        distance\n      };\n    }\n\n    return {\n      getSize,\n\n      refresh(object) {\n        if (isObject3D(object)) box.setFromObject(object);else if (isBox3(object)) box.copy(object);else if (ref.current) box.setFromObject(ref.current);\n\n        if (box.isEmpty()) {\n          const max = camera.position.length() || 10;\n          box.setFromCenterAndSize(new THREE.Vector3(), new THREE.Vector3(max, max, max));\n        }\n\n        if ((controls == null ? void 0 : controls.constructor.name) === 'OrthographicTrackballControls') {\n          // Put camera on a sphere along which it should moves\n          const {\n            distance\n          } = getSize();\n          const direction = camera.position.clone().sub(controls.target).normalize().multiplyScalar(distance);\n          const newPos = controls.target.clone().add(direction);\n          camera.position.copy(newPos);\n        }\n\n        return this;\n      },\n\n      clip() {\n        const {\n          distance\n        } = getSize();\n        if (controls) controls.maxDistance = distance * 10;\n        camera.near = distance / 100;\n        camera.far = distance * 100;\n        camera.updateProjectionMatrix();\n        if (controls) controls.update();\n        return this;\n      },\n\n      fit() {\n        current.camera.copy(camera.position);\n        if (controls) current.focus.copy(controls.target);\n        const {\n          center,\n          distance\n        } = getSize();\n        const direction = center.clone().sub(camera.position).normalize().multiplyScalar(distance);\n        goal.camera.copy(center).sub(direction);\n        goal.focus.copy(center);\n\n        if (isOrthographic(camera)) {\n          current.zoom = camera.zoom;\n          let maxHeight = 0,\n              maxWidth = 0;\n          const vertices = [new THREE.Vector3(box.min.x, box.min.y, box.min.z), new THREE.Vector3(box.min.x, box.max.y, box.min.z), new THREE.Vector3(box.min.x, box.min.y, box.max.z), new THREE.Vector3(box.min.x, box.max.y, box.max.z), new THREE.Vector3(box.max.x, box.max.y, box.max.z), new THREE.Vector3(box.max.x, box.max.y, box.min.z), new THREE.Vector3(box.max.x, box.min.y, box.max.z), new THREE.Vector3(box.max.x, box.min.y, box.min.z)]; // Transform the center and each corner to camera space\n\n          center.applyMatrix4(camera.matrixWorldInverse);\n\n          for (const v of vertices) {\n            v.applyMatrix4(camera.matrixWorldInverse);\n            maxHeight = Math.max(maxHeight, Math.abs(v.y - center.y));\n            maxWidth = Math.max(maxWidth, Math.abs(v.x - center.x));\n          }\n\n          maxHeight *= 2;\n          maxWidth *= 2;\n          const zoomForHeight = (camera.top - camera.bottom) / maxHeight;\n          const zoomForWidth = (camera.right - camera.left) / maxWidth;\n          goal.zoom = Math.min(zoomForHeight, zoomForWidth) / margin;\n\n          if (!damping) {\n            camera.zoom = goal.zoom;\n            camera.updateProjectionMatrix();\n          }\n        }\n\n        if (damping) {\n          current.animating = true;\n        } else {\n          camera.position.copy(goal.camera);\n          camera.lookAt(goal.focus);\n\n          if (controls) {\n            controls.target.copy(goal.focus);\n            controls.update();\n          }\n\n          invalidate();\n        }\n\n        if (onFitRef.current) onFitRef.current(this.getSize());\n        return this;\n      }\n\n    };\n  }, [box, camera, controls, margin, damping, invalidate]);\n  React.useLayoutEffect(() => {\n    api.refresh();\n    if (fit) api.fit();\n    if (clip) api.clip();\n\n    if (controls) {\n      // Try to prevent drag hijacking\n      const callback = () => current.animating = false;\n\n      controls.addEventListener('start', callback);\n      return () => controls.removeEventListener('start', callback);\n    }\n  }, [clip, fit, controls]);\n  useFrame((state, delta) => {\n    if (current.animating) {\n      damp(current.focus, goal.focus, damping, delta);\n      damp(current.camera, goal.camera, damping, delta);\n      current.zoom = THREE.MathUtils.damp(current.zoom, goal.zoom, damping, delta);\n      camera.position.copy(current.camera);\n\n      if (isOrthographic(camera)) {\n        camera.zoom = current.zoom;\n        camera.updateProjectionMatrix();\n      }\n\n      if (!controls) {\n        camera.lookAt(current.focus);\n      } else {\n        controls.target.copy(current.focus);\n        controls.update();\n      }\n\n      invalidate();\n      if (isOrthographic(camera) && !(Math.abs(current.zoom - goal.zoom) < eps)) return;\n      if (!isOrthographic(camera) && !equals(current.camera, goal.camera)) return;\n      if (controls && !equals(current.focus, goal.focus)) return;\n      current.animating = false;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, /*#__PURE__*/React.createElement(context.Provider, {\n    value: api\n  }, children));\n}\n\nfunction useBounds() {\n  return React.useContext(context);\n}\n\nexport { Bounds, useBounds };","map":{"version":3,"names":["React","THREE","useThree","useFrame","isOrthographic","def","isOrthographicCamera","isObject3D","isBox3","context","createContext","Bounds","children","damping","fit","clip","margin","eps","onFit","ref","useRef","camera","state","controls","invalidate","onFitRef","current","equals","a","b","Math","abs","x","y","z","damp","v","t","lambda","delta","MathUtils","useState","animating","focus","Vector3","zoom","goal","box","Box3","api","useMemo","getSize","size","center","getCenter","maxSize","max","fitHeightDistance","atan","PI","fov","fitWidthDistance","aspect","distance","refresh","object","setFromObject","copy","isEmpty","position","length","setFromCenterAndSize","constructor","name","direction","clone","sub","target","normalize","multiplyScalar","newPos","add","maxDistance","near","far","updateProjectionMatrix","update","maxHeight","maxWidth","vertices","min","applyMatrix4","matrixWorldInverse","zoomForHeight","top","bottom","zoomForWidth","right","left","lookAt","useLayoutEffect","callback","addEventListener","removeEventListener","createElement","Provider","value","useBounds","useContext"],"sources":["/Users/khuong/Desktop/2022/ReactJS/r3f-audio-analyser-forked/node_modules/@react-three/drei/core/Bounds.js"],"sourcesContent":["import * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\n\nconst isOrthographic = def => def && def.isOrthographicCamera;\n\nconst isObject3D = def => def && def.isObject3D;\n\nconst isBox3 = def => def && def.isBox3;\n\nconst context = /*#__PURE__*/React.createContext(null);\nfunction Bounds({\n  children,\n  damping = 6,\n  fit,\n  clip,\n  margin = 1.2,\n  eps = 0.01,\n  onFit\n}) {\n  const ref = React.useRef(null);\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const controls = useThree(state => state.controls);\n  const invalidate = useThree(state => state.invalidate);\n  const onFitRef = React.useRef(onFit);\n  onFitRef.current = onFit;\n\n  function equals(a, b) {\n    return Math.abs(a.x - b.x) < eps && Math.abs(a.y - b.y) < eps && Math.abs(a.z - b.z) < eps;\n  }\n\n  function damp(v, t, lambda, delta) {\n    v.x = THREE.MathUtils.damp(v.x, t.x, lambda, delta);\n    v.y = THREE.MathUtils.damp(v.y, t.y, lambda, delta);\n    v.z = THREE.MathUtils.damp(v.z, t.z, lambda, delta);\n  }\n\n  const [current] = React.useState(() => ({\n    animating: false,\n    focus: new THREE.Vector3(),\n    camera: new THREE.Vector3(),\n    zoom: 1\n  }));\n  const [goal] = React.useState(() => ({\n    focus: new THREE.Vector3(),\n    camera: new THREE.Vector3(),\n    zoom: 1\n  }));\n  const [box] = React.useState(() => new THREE.Box3());\n  const api = React.useMemo(() => {\n    function getSize() {\n      const size = box.getSize(new THREE.Vector3());\n      const center = box.getCenter(new THREE.Vector3());\n      const maxSize = Math.max(size.x, size.y, size.z);\n      const fitHeightDistance = isOrthographic(camera) ? maxSize * 4 : maxSize / (2 * Math.atan(Math.PI * camera.fov / 360));\n      const fitWidthDistance = isOrthographic(camera) ? maxSize * 4 : fitHeightDistance / camera.aspect;\n      const distance = margin * Math.max(fitHeightDistance, fitWidthDistance);\n      return {\n        box,\n        size,\n        center,\n        distance\n      };\n    }\n\n    return {\n      getSize,\n\n      refresh(object) {\n        if (isObject3D(object)) box.setFromObject(object);else if (isBox3(object)) box.copy(object);else if (ref.current) box.setFromObject(ref.current);\n\n        if (box.isEmpty()) {\n          const max = camera.position.length() || 10;\n          box.setFromCenterAndSize(new THREE.Vector3(), new THREE.Vector3(max, max, max));\n        }\n\n        if ((controls == null ? void 0 : controls.constructor.name) === 'OrthographicTrackballControls') {\n          // Put camera on a sphere along which it should moves\n          const {\n            distance\n          } = getSize();\n          const direction = camera.position.clone().sub(controls.target).normalize().multiplyScalar(distance);\n          const newPos = controls.target.clone().add(direction);\n          camera.position.copy(newPos);\n        }\n\n        return this;\n      },\n\n      clip() {\n        const {\n          distance\n        } = getSize();\n        if (controls) controls.maxDistance = distance * 10;\n        camera.near = distance / 100;\n        camera.far = distance * 100;\n        camera.updateProjectionMatrix();\n        if (controls) controls.update();\n        return this;\n      },\n\n      fit() {\n        current.camera.copy(camera.position);\n        if (controls) current.focus.copy(controls.target);\n        const {\n          center,\n          distance\n        } = getSize();\n        const direction = center.clone().sub(camera.position).normalize().multiplyScalar(distance);\n        goal.camera.copy(center).sub(direction);\n        goal.focus.copy(center);\n\n        if (isOrthographic(camera)) {\n          current.zoom = camera.zoom;\n          let maxHeight = 0,\n              maxWidth = 0;\n          const vertices = [new THREE.Vector3(box.min.x, box.min.y, box.min.z), new THREE.Vector3(box.min.x, box.max.y, box.min.z), new THREE.Vector3(box.min.x, box.min.y, box.max.z), new THREE.Vector3(box.min.x, box.max.y, box.max.z), new THREE.Vector3(box.max.x, box.max.y, box.max.z), new THREE.Vector3(box.max.x, box.max.y, box.min.z), new THREE.Vector3(box.max.x, box.min.y, box.max.z), new THREE.Vector3(box.max.x, box.min.y, box.min.z)]; // Transform the center and each corner to camera space\n\n          center.applyMatrix4(camera.matrixWorldInverse);\n\n          for (const v of vertices) {\n            v.applyMatrix4(camera.matrixWorldInverse);\n            maxHeight = Math.max(maxHeight, Math.abs(v.y - center.y));\n            maxWidth = Math.max(maxWidth, Math.abs(v.x - center.x));\n          }\n\n          maxHeight *= 2;\n          maxWidth *= 2;\n          const zoomForHeight = (camera.top - camera.bottom) / maxHeight;\n          const zoomForWidth = (camera.right - camera.left) / maxWidth;\n          goal.zoom = Math.min(zoomForHeight, zoomForWidth) / margin;\n\n          if (!damping) {\n            camera.zoom = goal.zoom;\n            camera.updateProjectionMatrix();\n          }\n        }\n\n        if (damping) {\n          current.animating = true;\n        } else {\n          camera.position.copy(goal.camera);\n          camera.lookAt(goal.focus);\n\n          if (controls) {\n            controls.target.copy(goal.focus);\n            controls.update();\n          }\n\n          invalidate();\n        }\n\n        if (onFitRef.current) onFitRef.current(this.getSize());\n        return this;\n      }\n\n    };\n  }, [box, camera, controls, margin, damping, invalidate]);\n  React.useLayoutEffect(() => {\n    api.refresh();\n    if (fit) api.fit();\n    if (clip) api.clip();\n\n    if (controls) {\n      // Try to prevent drag hijacking\n      const callback = () => current.animating = false;\n\n      controls.addEventListener('start', callback);\n      return () => controls.removeEventListener('start', callback);\n    }\n  }, [clip, fit, controls]);\n  useFrame((state, delta) => {\n    if (current.animating) {\n      damp(current.focus, goal.focus, damping, delta);\n      damp(current.camera, goal.camera, damping, delta);\n      current.zoom = THREE.MathUtils.damp(current.zoom, goal.zoom, damping, delta);\n      camera.position.copy(current.camera);\n\n      if (isOrthographic(camera)) {\n        camera.zoom = current.zoom;\n        camera.updateProjectionMatrix();\n      }\n\n      if (!controls) {\n        camera.lookAt(current.focus);\n      } else {\n        controls.target.copy(current.focus);\n        controls.update();\n      }\n\n      invalidate();\n      if (isOrthographic(camera) && !(Math.abs(current.zoom - goal.zoom) < eps)) return;\n      if (!isOrthographic(camera) && !equals(current.camera, goal.camera)) return;\n      if (controls && !equals(current.focus, goal.focus)) return;\n      current.animating = false;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, /*#__PURE__*/React.createElement(context.Provider, {\n    value: api\n  }, children));\n}\nfunction useBounds() {\n  return React.useContext(context);\n}\n\nexport { Bounds, useBounds };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}